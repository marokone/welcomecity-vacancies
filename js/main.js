class VacancyApp{constructor(){this.config={supabaseUrl:"https://vhbiezamhpyejdqvvwuj.supabase.co",supabaseKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZoYmllemFtaHB5ZWpkcXZ2d3VqIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE2Njc0MDgsImV4cCI6MjA3NzI0MzQwOH0.13h_XJ7kQFtuCjavkOXN9TzXNF2X4jX5-rcNCFiFqO0",cacheKeys:{data:"wc-vacancies-data",timestamp:"wc-vacancies-timestamp"},cacheTTL:3e5},this.state={allVacancies:[],currentProject:[],currentDepartment:[],currentQuery:"",currentVacancy:null,placeholderInterval:null,supabase:null,realtimeSubscription:null,projectCounts:{},deptCounts:{}},this.init()}async init(){console.log("üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –≤–∞–∫–∞–Ω—Å–∏–π..."),this.fixTildaStyles(),this.setupEventListeners(),this.initializeSupabase(),await this.loadVacanciesData(),this.initializeFormAnimation(),console.log("‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞")}fixTildaStyles(){const t=document.createElement("style");t.textContent="\n            .t-records_overflow-hidden,\n            .t-records,\n            .t-body {\n                overflow: visible !important;\n                height: auto !important;\n                min-height: 100vh !important;\n            }\n\n            .t396, .t396__artboard,\n            #rec1480064551 .t396,\n            #rec1475773601 .t396 {\n                height: auto !important;\n                min-height: auto !important;\n                overflow: visible !important;\n            }\n\n            #rec1480064551 {\n                position: relative !important;\n                z-index: 1 !important;\n            }\n\n            .vacancy-container {\n                max-width: 1200px !important;\n                margin: 0 auto !important;\n                padding: 40px 20px !important;\n            }\n        ",document.head.appendChild(t)}setupEventListeners(){document.addEventListener("click",t=>{const e=t.target.closest(".vacancy-card");if(e){const t=decodeURIComponent(e.dataset.key),[n,s,a]=t.split("|"),i=this.state.allVacancies.find(t=>t.title===n&&(t.project||"")===(s||"")&&t.department===a);i&&this.showVacancyDetail(i)}});const t=document.getElementById("vacancy-search");t&&t.addEventListener("input",t=>{this.state.currentQuery=t.target.value.toLowerCase(),this.renderResults()});const e=document.getElementById("reset-all-filters");e&&e.addEventListener("click",()=>{this.state.currentProject=[],this.state.currentDepartment=[],this.state.currentQuery="";const t=document.getElementById("vacancy-search");t&&(t.value=""),this.renderFilters(),this.renderResults()}),["project-filter","department-filter"].forEach(t=>{const e=document.getElementById(t);if(!e)return;const n=e.querySelector(".select-header"),s=e.querySelector(".select-dropdown"),a=e.querySelector(".clear-btn");n&&n.addEventListener("click",t=>{t.stopPropagation();const n=e.classList.contains("active");document.querySelectorAll(".custom-select").forEach(t=>{if(t!==e){t.classList.remove("active");const e=t.querySelector(".select-dropdown");e&&(e.style.display="none")}}),e.classList.toggle("active"),s&&(s.style.display=n?"none":"block")}),a&&a.addEventListener("click",n=>{n.stopPropagation(),"project-filter"===t&&(this.state.currentProject=[],e.classList.remove("has-selection")),"department-filter"===t&&(this.state.currentDepartment=[],e.classList.remove("has-selection")),this.renderFilters(),this.renderResults(),this.updateClearButtonVisibility()}),s&&s.addEventListener("change",n=>{if("checkbox"===n.target.type){const s=n.target.value,a=n.target.checked;"project-filter"===t?(a?this.state.currentProject.includes(s)||this.state.currentProject.push(s):this.state.currentProject=this.state.currentProject.filter(t=>t!==s),this.state.currentProject.length>0?e.classList.add("has-selection"):e.classList.remove("has-selection")):(a?this.state.currentDepartment.includes(s)||this.state.currentDepartment.push(s):this.state.currentDepartment=this.state.currentDepartment.filter(t=>t!==s),this.state.currentDepartment.length>0?e.classList.add("has-selection"):e.classList.remove("has-selection")),this.renderFilters(),this.renderResults(),this.updateClearButtonVisibility()}})}),document.addEventListener("click",t=>{t.target.closest(".custom-select")||document.querySelectorAll(".custom-select").forEach(t=>{t.classList.remove("active");const e=t.querySelector(".select-dropdown");e&&(e.style.display="none")})}),this.setupMobileFilters(),document.addEventListener("click",t=>{t.target.closest(".back-to-list-btn")&&this.showVacancyList()}),window.addEventListener("popstate",t=>{const e=new URLSearchParams(window.location.search),n=e.get("vacancy"),s=e.get("project")||"",a=e.get("dept");if(n&&this.state.allVacancies.length>0){const t=this.state.allVacancies.find(t=>t.title===n&&(t.project||"")===s&&t.department===a);if(t)return void this.showVacancyDetail(t)}this.showVacancyList()})}setupMobileFilters(){const t=document.getElementById("mobile-filters-modal"),e=document.getElementById("mobile-project-dropdown"),n=document.getElementById("mobile-dept-dropdown"),s=document.getElementById("mobile-filters-btn");s&&s.addEventListener("click",()=>{this.renderMobileFilters(),this.updateMobileApplyButton(),t&&(t.style.display="block",setTimeout(()=>{t.classList.add("active")},10))}),document.addEventListener("click",e=>{t&&"block"===t.style.display&&e.target===t&&this.closeMobileFilters()});const a=document.getElementById("clear-mobile-filters");a&&a.addEventListener("click",()=>{this.state.currentProject=[],this.state.currentDepartment=[];const t=document.getElementById("project-filter"),e=document.getElementById("department-filter");t&&t.classList.remove("has-selection"),e&&e.classList.remove("has-selection"),this.renderFilters(),this.renderResults(),this.updateMobileApplyButton(),this.updateClearButtonVisibility()});const i=document.getElementById("apply-mobile-filters");i&&i.addEventListener("click",()=>{this.state.currentProject.length>0||this.state.currentDepartment.length>0?(this.renderFilters(),this.renderResults(),this.closeMobileFilters()):this.closeMobileFilters()}),document.querySelectorAll(".filter-item").forEach(t=>{t.addEventListener("click",()=>{const s=t.dataset.type;"projects"===s&&e?e.style.display="flex":"departments"===s&&n&&(n.style.display="flex")})}),document.querySelectorAll(".close-dropdown").forEach(t=>{t.addEventListener("click",()=>{e&&(e.style.display="none"),n&&(n.style.display="none")})}),document.addEventListener("change",t=>{if("checkbox"===t.target.type&&(t.target.closest("#mobile-project-options")||t.target.closest("#mobile-dept-options"))){const e=t.target.value;t.target.closest("#mobile-project-options")?t.target.checked?this.state.currentProject.includes(e)||this.state.currentProject.push(e):this.state.currentProject=this.state.currentProject.filter(t=>t!==e):t.target.checked?this.state.currentDepartment.includes(e)||this.state.currentDepartment.push(e):this.state.currentDepartment=this.state.currentDepartment.filter(t=>t!==e);const n=document.getElementById("project-filter"),s=document.getElementById("department-filter");n&&(this.state.currentProject.length>0?n.classList.add("has-selection"):n.classList.remove("has-selection")),s&&(this.state.currentDepartment.length>0?s.classList.add("has-selection"):s.classList.remove("has-selection")),this.renderMobileFilters(),this.updateMobileApplyButton(),this.updateClearButtonVisibility()}})}initializeSupabase(){return window.supabase?(this.state.supabase=window.supabase,console.log("‚úÖ Supabase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"),!0):(console.error("‚ùå Supabase JS –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω"),!1)}getCachedData(){try{const t=localStorage.getItem(this.config.cacheKeys.data),e=localStorage.getItem(this.config.cacheKeys.timestamp);if(!t||!e)return null;const n=Date.now();if(n-parseInt(e)>this.config.cacheTTL)return console.log("‚ÑπÔ∏è –ö—ç—à —É—Å—Ç–∞—Ä–µ–ª, —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ"),null;const s=JSON.parse(t);return console.log("‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑ –∫—ç—à–∞:",s.vacancies?.length,"–≤–∞–∫–∞–Ω—Å–∏–π"),s.vacancies||[]}catch(t){return console.error("‚ùå –û—à–∏–±–∫–∞ —á—Ç–µ–Ω–∏—è –∫—ç—à–∞:",t),null}}saveToCache(t){try{const e={vacancies:t,timestamp:Date.now()};localStorage.setItem(this.config.cacheKeys.data,JSON.stringify(e)),localStorage.setItem(this.config.cacheKeys.timestamp,Date.now().toString()),console.log("üíæ –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –∫—ç—à:",t.length,"–≤–∞–∫–∞–Ω—Å–∏–π")}catch(t){console.error("‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –∫—ç—à:",t)}}formatVacancyData(t){return{id:t.id,title:t.title||"–ë–µ–∑ –Ω–∞–∑–≤–∞–Ω–∏—è",project_name:t.project_name||"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞",project:t.project||t.project_name||"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞",department:t.department||"–ë–µ–∑ –æ—Ç–¥–µ–ª–∞",description:t.description||"",requirements:t.requirements||"",responsibilities:t.responsibilities||"",conditions:t.conditions||"",format:t.format||"–ù–µ —É–∫–∞–∑–∞–Ω",status:t.status,created_at:t.created_at}}async loadFromSupabase(){if(!this.state.supabase&&!this.initializeSupabase())throw new Error("Supabase –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω");console.log("üì° –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Supabase...");const{data:t,error:e}=await this.state.supabase.from("vacancies").select("*").eq("status","active").order("created_at",{ascending:!1});if(e)throw console.error("‚ùå –û—à–∏–±–∫–∞ Supabase:",e),e;if(t&&t.length>0){const e=t.map(t=>this.formatVacancyData(t)),n=this.state.allVacancies.length;n!==e.length||JSON.stringify(this.state.allVacancies)!==JSON.stringify(e)?(this.state.allVacancies=e,this.saveToCache(this.state.allVacancies),this.calculateCounts(),n>0?(console.log("üîÑ –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã, –ø–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"),this.updateInterface(),this.showNotification("–î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω—ã","success")):this.updateInterface()):console.log("‚úÖ –î–∞–Ω–Ω—ã–µ –∞–∫—Ç—É–∞–ª—å–Ω—ã, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è"),console.log("‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ –∏–∑ Supabase:",this.state.allVacancies.length,"–≤–∞–∫–∞–Ω—Å–∏–π"),this.state.realtimeSubscription||this.startRealtimeSubscription()}else console.log("‚ÑπÔ∏è –í Supabase –Ω–µ—Ç –≤–∞–∫–∞–Ω—Å–∏–π"),this.state.allVacancies=[],this.saveToCache([]),this.updateInterface();this.hideLoader()}calculateCounts(){this.state.projectCounts={},this.state.allVacancies.forEach(t=>{const e=t.project||"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞";this.state.projectCounts[e]=(this.state.projectCounts[e]||0)+1}),this.state.deptCounts={},this.state.allVacancies.forEach(t=>{const e=t.department||"–ë–µ–∑ –æ—Ç–¥–µ–ª–∞";this.state.deptCounts[e]=(this.state.deptCounts[e]||0)+1})}startRealtimeSubscription(){if(this.state.supabase&&!this.state.realtimeSubscription)try{this.state.realtimeSubscription=this.state.supabase.channel("vacancies-changes").on("postgres_changes",{event:"*",schema:"public",table:"vacancies"},t=>{console.log("üîî Realtime –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:",t.eventType,t.new),this.handleRealtimeUpdate(t)}).subscribe(t=>{"SUBSCRIBED"===t?console.log("‚úÖ Realtime –ø–æ–¥–ø–∏—Å–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞"):"CHANNEL_ERROR"===t&&console.error("‚ùå –û—à–∏–±–∫–∞ realtime –ø–æ–¥–ø–∏—Å–∫–∏")})}catch(t){console.error("‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ realtime:",t)}}handleRealtimeUpdate(t){const{eventType:e,new:n,old:s}=t;switch(e){case"INSERT":if("active"===n.status){const t=this.formatVacancyData(n);this.state.allVacancies.unshift(t),this.saveToCache(this.state.allVacancies),this.calculateCounts(),this.updateInterface(),this.showNotification("–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è –≤–∞–∫–∞–Ω—Å–∏—è","success")}break;case"UPDATE":const t=this.state.allVacancies.findIndex(t=>t.id===n.id);-1!==t&&("active"===n.status?this.state.allVacancies[t]=this.formatVacancyData(n):this.state.allVacancies.splice(t,1),this.saveToCache(this.state.allVacancies),this.calculateCounts(),this.updateInterface(),this.showNotification("–í–∞–∫–∞–Ω—Å–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞","info"));break;case"DELETE":const e=this.state.allVacancies.findIndex(t=>t.id===s.id);-1!==e&&(this.state.allVacancies.splice(e,1),this.saveToCache(this.state.allVacancies),this.calculateCounts(),this.updateInterface(),this.showNotification("–í–∞–∫–∞–Ω—Å–∏—è —É–¥–∞–ª–µ–Ω–∞","info"))}}async loadVacanciesData(){this.showLoader();try{const t=this.getCachedData();t&&t.length>0&&(this.state.allVacancies=t,this.calculateCounts(),this.updateInterface(),this.hideLoader()),await this.loadFromSupabase()}catch(t){if(console.error("‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö:",t),0===this.state.allVacancies.length){const t=this.getCachedData();t&&t.length>0?(this.state.allVacancies=t,this.calculateCounts(),this.updateInterface(),this.showNotification("–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ","info")):this.showError("–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–≥—Ä—É–∑–∏—Ç—å –≤–∞–∫–∞–Ω—Å–∏–∏")}this.hideLoader()}}showLoader(){const t=document.getElementById("loading-spinner");t&&(t.style.display="flex");const e=document.getElementById("vacancy-results");e&&(e.style.display="none")}hideLoader(){const t=document.getElementById("loading-spinner");t&&(t.style.display="none");const e=document.getElementById("vacancy-results");e&&(e.style.display="block")}showNotification(t,e="info"){const n=document.createElement("div");n.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 12px 20px;\n            border-radius: 8px;\n            color: white;\n            z-index: 10000;\n            font-family: 'ALSHaussNext', sans-serif;\n            font-size: 14px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            transition: all 0.3s ease;\n            max-width: 300px;\n        ";const s={success:"#27ae60",error:"#e74c3c",info:"#3498db",warning:"#f39c12"};n.style.background=s[e]||s.info,n.textContent=t,document.body.appendChild(n),setTimeout(()=>{n.style.opacity="0",n.style.transform="translateX(100px)",setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n)},300)},3e3)}showError(t){const e=document.getElementById("vacancy-results");e&&(e.innerHTML=`\n                <div style="text-align:center; padding: 40px 20px; color: #666;">\n                    <div style="font-size: 48px; margin-bottom: 16px;">‚ö†Ô∏è</div>\n                    <h3 style="margin: 0 0 8px 0; color: #333;">${t}</h3>\n                    <p style="margin: 0; opacity: 0.7;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</p>\n                    <button onclick="window.vacancyApp.loadVacanciesData()" style="\n                        margin-top: 20px;\n                        padding: 12px 24px;\n                        background: #048868;\n                        color: white;\n                        border: none;\n                        border-radius: 6px;\n                        cursor: pointer;\n                        font-family: 'ALSHaussNext', sans-serif;\n                    ">–û–±–Ω–æ–≤–∏—Ç—å</button>\n                </div>\n            `)}updateInterface(){if(0===this.state.allVacancies.length){const t=document.getElementById("vacancy-results");return void(t&&(t.innerHTML='\n                    <div style="text-align:center; padding: 60px 20px; color: #666;">\n                        <div style="font-size: 48px; margin-bottom: 16px;">üòî</div>\n                        <h3 style="margin: 0 0 8px 0; color: #333;">–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π</h3>\n                        <p style="margin: 0; opacity: 0.7;">–°–≤—è–∂–∏—Ç–µ—Å—å —Å HR-–æ—Ç–¥–µ–ª–æ–º –¥–ª—è —É—Ç–æ—á–Ω–µ–Ω–∏—è</p>\n                    </div>\n                '))}const t=document.getElementById("vacancy-search");if(t&&this.state.allVacancies.length>0){const e=this.state.allVacancies.map(t=>t.title).filter(t=>t&&t.trim());let n=0;const s=()=>{t.placeholder=e[n]||"–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞–∫–∞–Ω—Å–∏–∏",n=(n+1)%(e.length||1)};e.length>0&&(s(),this.state.placeholderInterval&&clearInterval(this.state.placeholderInterval),this.state.placeholderInterval=setInterval(s,1e3))}const e=new URLSearchParams(window.location.search),n=e.get("vacancy"),s=e.get("project")||"",a=e.get("dept");if(n&&this.state.allVacancies.length>0){const t=this.state.allVacancies.find(t=>t.title===n&&(t.project||"")===s&&t.department===a);if(t)return void setTimeout(()=>{this.showVacancyDetail(t)},100)}const i=document.querySelector(".vacancy-container");i&&(i.style.display="block"),this.renderFilters(),this.renderResults(),this.updateClearButtonVisibility()}getAvailableProjects(t=[]){const e={};return this.state.allVacancies.forEach(n=>{const s=n.department,a=n.project||"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞";(0===t.length||t.includes(s))&&(e[a]=(e[a]||0)+1)}),e}getAvailableDepartments(t=[]){const e={};return this.state.allVacancies.forEach(n=>{const s=n.project||"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞",a=n.department;(0===t.length||t.includes(s))&&(e[a]=(e[a]||0)+1)}),e}renderFilters(){console.log("üéõÔ∏è Rendering filters...");const t=this.getAvailableProjects(this.state.currentDepartment),e=this.getAvailableDepartments(this.state.currentProject),n=document.getElementById("project-filter"),s=document.getElementById("department-filter");if(n){const e=n.querySelector(".select-dropdown"),s=n.querySelector(".selected-values");e&&(e.innerHTML=Object.entries(t).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`\n                            <div class="select-option">\n                                <input type="checkbox" value="${t}" ${this.state.currentProject.includes(t)?"checked":""} id="proj-${t.replace(/\s+/g,"-")}">\n                                <label for="proj-${t.replace(/\s+/g,"-")}">\n                                    ${t} <span class="option-count">(${e})</span>\n                                </label>\n                            </div>\n                        `).join("")),s&&(this.state.currentProject.length>0?(s.textContent=this.state.currentProject.join(", "),n.classList.add("has-selection")):(s.textContent="–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã",n.classList.remove("has-selection")))}if(s){const t=s.querySelector(".select-dropdown"),n=s.querySelector(".selected-values");t&&(t.innerHTML=Object.entries(e).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>`\n                            <div class="select-option">\n                                <input type="checkbox" value="${t}" ${this.state.currentDepartment.includes(t)?"checked":""} id="dept-${t.replace(/\s+/g,"-")}">\n                                <label for="dept-${t.replace(/\s+/g,"-")}">\n                                    ${t} <span class="option-count">(${e})</span>\n                                </label>\n                            </div>\n                        `).join("")),n&&(this.state.currentDepartment.length>0?(n.textContent=this.state.currentDepartment.join(", "),s.classList.add("has-selection")):(n.textContent="–í—Å–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è",s.classList.remove("has-selection")))}this.renderMobileFilters(),this.updateResetButtonVisibility(),this.updateMobileApplyButton(),this.updateClearButtonVisibility()}renderMobileFilters(){const t=this.getAvailableProjects(this.state.currentDepartment),e=this.getAvailableDepartments(this.state.currentProject),n=document.getElementById("mobile-project-options");n&&(n.innerHTML=Object.entries(t).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>{const n=this.state.currentProject.includes(t)?"checked":"",s=`mob-proj-${t.replace(/\s+/g,"-")}`;return`\n                        <label class="mobile-filter-option">\n                            <input type="checkbox" value="${t}" ${n} id="${s}">\n                            <span>\n                                ${t} <span class="option-count">(${e})</span>\n                            </span>\n                        </label>\n                    `}).join(""));const s=document.getElementById("mobile-dept-options");s&&(s.innerHTML=Object.entries(e).sort(([t],[e])=>t.localeCompare(e)).map(([t,e])=>{const n=this.state.currentDepartment.includes(t)?"checked":"",s=`mob-dept-${t.replace(/\s+/g,"-")}`;return`\n                        <label class="mobile-filter-option">\n                            <input type="checkbox" value="${t}" ${n} id="${s}">\n                            <span>\n                                ${t} <span class="option-count">(${e})</span>\n                            </span>\n                        </label>\n                    `}).join(""));const a=document.querySelector('.filter-item[data-type="projects"] .filter-value'),i=document.querySelector('.filter-item[data-type="departments"] .filter-value');a&&(a.textContent=this.state.currentProject.length?this.state.currentProject.join(", "):"–í—Å–µ –ø—Ä–æ–µ–∫—Ç—ã"),i&&(i.textContent=this.state.currentDepartment.length?this.state.currentDepartment.join(", "):"–í—Å–µ –ø–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è")}renderResults(){const t=document.getElementById("vacancy-results");if(!t)return void console.error("‚ùå Element #vacancy-results not found!");if(console.log("üìÑ Rendering results..."),0===this.state.allVacancies.length)return void(t.innerHTML='<p style="text-align:center;color:#999;padding:40px 0;">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–π</p>');const e=this.state.allVacancies.filter(t=>{const e=0===this.state.currentProject.length||this.state.currentProject.includes(t.project||"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞"),n=0===this.state.currentDepartment.length||this.state.currentDepartment.includes(t.department),s=""===this.state.currentQuery||t.title&&t.title.toLowerCase().includes(this.state.currentQuery)||t.description&&t.description.toLowerCase().includes(this.state.currentQuery);return e&&n&&s});if(console.log(`Filtered vacancies: ${e.length} out of ${this.state.allVacancies.length}`),0===e.length)return t.innerHTML='\n                <div style="text-align:center;color:#999;padding:40px 0;">\n                    <p>–í–∞–∫–∞–Ω—Å–∏–π –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</p>\n                    <p style="font-size:14px;margin-top:8px;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–∏—Å–∫–∞</p>\n                </div>\n            ',this.updateResetButtonVisibility(),this.updateMobileApplyButton(),void this.updateClearButtonVisibility();const n={};e.forEach(t=>{const e=t.department||"–ë–µ–∑ –æ—Ç–¥–µ–ª–∞";n[e]||(n[e]=[]),n[e].push(t)});const s=Object.keys(n).sort().map(t=>{const e=n[t],s=e.length;return`\n                    <h2 class="department-header">${t.charAt(0).toUpperCase()+t.slice(1)} <span class="dept-count">${s}</span></h2>\n                    ${e.map(t=>{const e=t.project||"–ë–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞",n=`${t.title}|${t.project||""}|${t.department}`;return`\n                            <div class="vacancy-card-wrapper">\n                                <div class="vacancy-card" data-key="${encodeURIComponent(n)}">\n                                    <div class="vacancy-content">\n                                        <h3>${t.title}</h3>\n                                        <p class="vacancy-meta">${e} ‚Äî ${t.department}</p>\n                                    </div>\n                                    <span class="arrow-icon">‚Üí</span>\n                                </div>\n                            </div>\n                        `}).join("")}\n                `}).join("");t.innerHTML=s,this.updateResetButtonVisibility(),this.updateMobileApplyButton(),this.updateClearButtonVisibility()}updateResetButtonVisibility(){const t=this.state.currentProject.length>0||this.state.currentDepartment.length>0||this.state.currentQuery.trim(),e=document.getElementById("reset-all-filters");e&&(e.style.display=t?"block":"none")}updateMobileApplyButton(){const t=document.getElementById("apply-mobile-filters");if(!t)return;this.state.currentProject.length>0||this.state.currentDepartment.length>0?(t.textContent="–ü–æ–∫–∞–∑–∞—Ç—å",t.style.background="#048868"):(t.textContent="–û—Ç–º–µ–Ω–∏—Ç—å",t.style.background="#666")}updateClearButtonVisibility(){const t=document.querySelector(".filter-clear-btn"),e=this.state.currentProject.length>0||this.state.currentDepartment.length>0;t&&(e?t.classList.add("visible"):t.classList.remove("visible"))}closeMobileFilters(){const t=document.getElementById("mobile-filters-modal");t&&(t.classList.remove("active"),setTimeout(()=>{t.style.display="none"},300))}showVacancyDetail(t){sessionStorage.setItem("vacancyListScroll",window.scrollY),sessionStorage.setItem("vacancyListHTML",document.getElementById("vacancy-results").innerHTML),sessionStorage.setItem("vacancyListFilters",JSON.stringify({project:this.state.currentProject,department:this.state.currentDepartment,query:this.state.currentQuery})),this.state.currentVacancy=t,window.scrollTo(0,0);const e=document.querySelector(".vacancy-container");e&&(e.style.display="none");const n=document.getElementById("rec1480064551");n&&(n.style.display="none");const s=document.getElementById("rec1475773601");s&&(s.style.display="none");let a=!1;if(["rec1480130241","rec1480130251","rec1480130271","rec1480130281","rec1480348491","rec1480130341","rec1513289611"].forEach(t=>{const e=document.getElementById(t);e&&(e.style.display="block",a=!0)}),!a)return void console.log("–ù–∏ –æ–¥–∏–Ω –¥–µ—Ç–∞–ª—å–Ω—ã–π –±–ª–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω!");const i=document.querySelector(".vacancy-title");i&&(i.textContent=t.title||"–ù–µ —É–∫–∞–∑–∞–Ω–æ",i.style.fontFamily="ALSHaussNext, sans-serif",i.style.fontSize="48px",i.style.fontWeight="700",i.style.color="#ffffff");const c=document.querySelector(".vacancy-description");c&&(c.innerHTML=t.description||"–ù–µ —É–∫–∞–∑–∞–Ω–æ");const o=document.querySelector(".vacancy-requirements");o&&(o.innerHTML=t.requirements||"–ù–µ —É–∫–∞–∑–∞–Ω–æ");const r=document.querySelector(".vacancy-responsibilities");r&&(r.innerHTML=t.responsibilities||"–ù–µ —É–∫–∞–∑–∞–Ω–æ");const l=document.querySelector(".vacancy-conditions");l&&(l.innerHTML=t.conditions||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"),setTimeout(()=>{this.updateTildaAccordion()},300);const d=`${window.location.pathname}?vacancy=${encodeURIComponent(t.title)}&project=${encodeURIComponent(t.project||"")}&dept=${encodeURIComponent(t.department)}`;history.pushState({vacancy:t},"",d)}showVacancyList(){const t=sessionStorage.getItem("vacancyListHTML");if(t){const e=JSON.parse(sessionStorage.getItem("vacancyListFilters"));this.state.currentProject=e.project,this.state.currentDepartment=e.department,this.state.currentQuery=e.query,document.getElementById("vacancy-results").innerHTML=t;const n=document.getElementById("vacancy-search");n&&(n.value=this.state.currentQuery),this.renderFilters();const s=sessionStorage.getItem("vacancyListScroll");s&&window.scrollTo(0,parseInt(s)),sessionStorage.removeItem("vacancyListHTML"),sessionStorage.removeItem("vacancyListScroll"),sessionStorage.removeItem("vacancyListFilters")}else this.renderResults();const e=document.getElementById("rec1480064551");e&&(e.style.display="block");const n=document.getElementById("rec1475773601");n&&(n.style.display="block");["rec1480130241","rec1480130251","rec1480130271","rec1480130281","rec1480130341","rec1513289611"].forEach(t=>{const e=document.getElementById(t);e&&(e.style.display="none")});const s=document.querySelector(".vacancy-container");s&&(s.style.display="block"),history.pushState(null,"",window.location.pathname)}updateTildaAccordion(){const t=document.getElementById("rec1513289611");if(!t)return void console.log("‚ùå –ê–∫–∫–æ—Ä–¥–µ–æ–Ω rec1513289611 –Ω–µ –Ω–∞–π–¥–µ–Ω");console.log("‚úÖ –ù–∞–π–¥–µ–Ω –∞–∫–∫–æ—Ä–¥–µ–æ–Ω Tilda:",t);const e=[document.getElementById("accordion1_1513289611"),document.getElementById("accordion2_1513289611"),document.getElementById("accordion3_1513289611")];console.log("–ù–∞–π–¥–µ–Ω–æ –∫–æ–Ω—Ç–µ–Ω—Ç–Ω—ã—Ö –±–ª–æ–∫–æ–≤:",e.filter(Boolean).length),e.filter(Boolean).length>=3&&this.state.currentVacancy?(this.updateAccordionContent(e[0],this.state.currentVacancy.requirements,"requirements"),this.updateAccordionContent(e[1],this.state.currentVacancy.responsibilities,"responsibilities"),this.updateAccordionContent(e[2],this.state.currentVacancy.conditions,"conditions"),console.log("‚úÖ –ê–∫–∫–æ—Ä–¥–µ–æ–Ω Tilda –æ–±–Ω–æ–≤–ª–µ–Ω –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏")):console.log("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–±–Ω–æ–≤–∏—Ç—å –∞–∫–∫–æ—Ä–¥–µ–æ–Ω: –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∏–ª–∏ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö –≤–∞–∫–∞–Ω—Å–∏–∏")}updateAccordionContent(t,e,n){if(!t)return void console.log(`‚ùå –ö–æ–Ω—Ç–µ–Ω—Ç–Ω—ã–π –±–ª–æ–∫ –¥–ª—è ${n} –Ω–µ –Ω–∞–π–¥–µ–Ω`);const s=t.querySelector(".t668__text");if(s&&this.state.currentVacancy){const t=this.formatAccordionContent(e,n);s.innerHTML=t,console.log(`‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω ${n}`)}else console.log(`‚ùå –ù–µ –Ω–∞–π–¥–µ–Ω —Ç–µ–∫—Å—Ç–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –¥–ª—è ${n}`)}formatAccordionContent(t,e){if(!t||"–ù–µ —É–∫–∞–∑–∞–Ω–æ"===t)return"<p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞</p>";if(t.includes("<")&&t.includes(">"))return this.ensureListStyling(t);const n=t.split("\n").filter(t=>t.trim());if(0===n.length)return"<p>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –Ω–µ —É–∫–∞–∑–∞–Ω–∞</p>";if(1===n.length)return`<p>${n[0].trim()}</p>`;return`<ul>${n.map(t=>`<li>${t.trim()}</li>`).join("")}</ul>`}ensureListStyling(t){return t.replace(/<ul>/g,"<ul>").replace(/<li>/g,"<li>")}initializeFormAnimation(){const t=document.getElementById("rec1480130341"),e=document.getElementById("rec1479156901");if(!t||!e)return void console.log("‚ùå –ë–ª–æ–∫–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã");console.log("‚úÖ –ë–ª–æ–∫–∏ –Ω–∞–π–¥–µ–Ω—ã");let n=null;const s=(t,e)=>{if(t.textContent?.trim()===e||t.textContent?.includes(e))return t;for(let n of t.children){const t=s(n,e);if(t)return t}return null};n=s(t,"–î–∞–≤–∞–π!"),n?console.log('‚úÖ –ù–∞–π–¥–µ–Ω —ç–ª–µ–º–µ–Ω—Ç —Å —Ç–µ–∫—Å—Ç–æ–º "–î–∞–≤–∞–π!":',n):(console.log('‚ùå –≠–ª–µ–º–µ–Ω—Ç —Å —Ç–µ–∫—Å—Ç–æ–º "–î–∞–≤–∞–π!" –Ω–µ –Ω–∞–π–¥–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É–µ–º –≤–µ—Å—å –±–ª–æ–∫'),n=t);const a=document.createElement("style");a.textContent='\n            #rec1480130341 .vacancy-form-btn,\n            #rec1480130341[data-is-button="true"] {\n                cursor: pointer !important;\n            }\n            #rec1480130341 .vacancy-form-btn:hover,\n            #rec1480130341[data-is-button="true"]:hover {\n                opacity: 0.9;\n            }\n        ',document.head.appendChild(a),n===t?n.setAttribute("data-is-button","true"):n.classList.add("vacancy-form-btn"),e.classList.remove("form-active"),t.classList.remove("button-hidden"),n.addEventListener("click",function(n){if(!n.target.closest(".vacancy-card"))return n.preventDefault(),n.stopPropagation(),console.log("üìù –û—Ç–∫—Ä—ã–≤–∞–µ–º —Ñ–æ—Ä–º—É"),e.classList.add("form-active"),t.classList.add("button-hidden"),setTimeout(()=>{const t=e.getBoundingClientRect().top+window.pageYOffset;window.scrollTo({top:t-50,behavior:"smooth"})},100),!1})}}window.vacancyApp=new VacancyApp;